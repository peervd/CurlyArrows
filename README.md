# CurlyArrows
For assessing organic chemistry reaction mechanisms with curly arrows.

## Description
CurlyArrows is a program designed to analyze chemical reaction mechanisms with curly arrows to indicate electron flow. The program allows users to input JSON code generated by ChemDoodle and optionally provide an API key for a generative AI model (to be specified later). It compares the provided reaction mechanism to a model mechanism associated with a selected exercise and provides structured feedback at three levels:
- **Global level**: Reaction steps analysis
- **Mechanistic level**: Curly arrow correctness
- **Structural level**: Molecular structure evaluation

The program can be used via either `input_analysis.py` or `GUI_generator.py`. Users must select an exercise number and input the JSON code provided by ChemDoodle which corresponds to their reaction mechanism.

## Features
- Compares student-provided reaction mechanisms with model mechanisms
- Detects errors in individual reaction steps and the electron flow (curly arrows)
- Identifies incorrect molecular structures
- Provides structured teacher feedback
- Optional integration with a generative AI model for enhanced feedback

## Installation
To run CurlyArrows, ensure that you have Python installed along with the required dependencies.

### Dependencies
The following Python modules must be installed before running the program:
- `rdkit`
- `PySide6`
- `numpy`

Install them using:
```bash
pip install rdkit PySide6 numpy
```

## Usage
CurlyArrows runs via the following Python scripts:
- `GUI_generator.py`
- `input_analysis.py`
- `operate_analysis.py`
- `convert_json_to_smiles.py`
- `mechanism_analysis.py`
- `mechanism_comparison.py`
- `primary_feedback.py`
- `openai_input.py`

### Running the Program
1. Run the graphical user interface (GUI) using:
   ```bash
   python GUI_generator.py
   ```
   OR run the script-based approach with:
   ```bash
   python input_analysis.py
   ```
2. Select the appropriate exercise number.
3. Provide JSON code generated by ChemDoodle.
4. (Optional) Enter an API key for AI-enhanced feedback.
5. Receive structured feedback on the reaction mechanism.

### Input Format
- JSON file generated by ChemDoodle based on a chemical reaction mechanism.

### Expected Output
- A text-based report providing structured feedback on the mechanism, including global reaction step analysis, mechanistic curly arrow evaluation, and structural assessment.

## Data Structure
The program relies on a CSV file that stores model answers:
- `exersice_model_answers.csv`: Contains JSON representations of model mechanisms, with the second row corresponding to exercise 1, the third row to exercise 2, and so on.

## License
CurlyArrows is licensed under the **GNU Affero General Public License (AGPL) Version 3, 19 November 2007**.

For more details, see the [AGPL License](https://www.gnu.org/licenses/agpl-3.0.html).

